<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Endeavour SLIET" />
    <meta
      property="og:description"
      content="An official robotics club of SLIET, Longowal"
    />
    <meta property="og:url" content="https://endeavoursliet.in" />
    <meta
      property="og:image"
      content="https://endeavoursliet.in/images/mainlogo.png"
    />
    <meta
      name="keywords"
      content="endeavour, endeavoursliet, sliet, endeavor, endeavorsliet, techfest, techfest22, madhuram, longowal, sangrur, delhi, iitbombay, iitdelhi, iit, nit, cfti, cuturalfest, mhrd, govt, endeavour recruitment"
    />
    <meta
      name="description"
      content="Official Website of Team Endeavour, Sliet Longowal"
    />
    <link
      rel="icon"
      type="image/png"
      href="./images/10Artboard 1_1white Endeavour.png"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />

    <link rel="stylesheet" href="./css/reg copy.css" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Endeavour | register</title>
   
  </head>
  <body>
    <nav class="topNav">
      <div class="emptySpace25">
        <div class="endeavourLogo">
          <a href="./index.html#home"
            ><img src="./images/mainlogo.png" alt="Endeavour-Logo" srcset=""
          /></a>
        </div>
      </div>
      <ul class="navArray">
        <li class="navComponent flex-center">
          <a href="./index.html#home" class="flex-center">HOME</a>
        </li>
        <li class="navComponent flex-center">
          <a href="./about.html#aboutTeam" class="flex-center">ABOUT US</a>
        </li>
        <li class="navComponent flex-center">
          <a href="projects.html#UAVs" class="flex-center">DOMAINS</a>
        </li>
        <li class="navComponent flex-center">
          <a href="./index.html#sponsors" class="flex-center">SPONSORS</a>
        </li>
        <li class="navComponent flex-center">
          <a href=".teams.html" class="flex-center">TEAM</a>
        </li>
      </ul>
      <div class="emptySpace25">
        <div class="endeavourLogo">
          <a
            href="http://sliet.ac.in/"
            target="_blank"
            rel="noopener noreferrer"
            ><img
              src="./images/SLIET_in_Colours_of_ENDEAVOUR.png"
              alt="Endeavour-Logo"
              srcset=""
          /></a>
        </div>
      </div>
    </nav>
    <!--  TOP NAVIGATION  -->
    <div class="container">
      <div class="content">
        <div class="left">
          <div class="logo">
            <a href="#"
              ><img
                src="./images/footerLogo.png"
                alt="Endeavour-Logo"
                srcset=""
            /></a>
          </div>
        </div>
        <p class="content-dealing">
          Endeavour is the official robotics team of SLIET, Punjab, founded in
          2014. Connecting like-minded yet unique intellectuals from all
          branches of engineering and aligning their skills and interests was
          the main objective behind the starting of Endeavour.<br />
          From then, our team is continuously working on various projects and
          participating in hackathons and techfests at national level. Looking
          for the opportunity for hands-on robots design? You've the entered the
          right place! To all the passionate and enthusiastic learners,<br />
          Endeavour have got it all for you. Come, and begin with us. We'll
          together make it to success.<br />
         Last Date for Registration is <bold>31/08/2023. </bold> <br />
         <span id="cptime"></span>  <br />
        </p>
      </div>
      <div class="main">
        <p class="pageTitle title">Registration form</p>
        <p class="secondaryTitle title">
          Come and witness opportunities awaiting each day
        </p>
        <p>* mandatory fields</p>

        <input type="text" class="formEntry" id="name" placeholder="Name*" />
        <input type="email" class="formEntry" id="email" placeholder="Email*" />
        <input
          type="text"
          class="formEntry"
          id="contact"
          placeholder="Contact No*"
        />
        <input
          type="number"
          class="formEntry"
          id="regno"
          placeholder="Reg No*"
        />
        <input
          type="text"
          class="formEntry"
          id="ten"
          placeholder="10th score*"
        />
        <input
          type="text"
          class="formEntry"
          id="twelve"
          placeholder="12th/Diploma score"
        />
        <textarea
          class="formEntry"
          id="why"
          placeholder="Why should we select you*"
        ></textarea>

        <select class="formEntry extend" id="prog">
          <option value="">Tap to select programme*</option>
          <option value="B.E">B.E</option>
          <option value="ICD">ICD</option>
        </select>
        <select class="formEntry extend" id="year">
          <option value="">Tap to select year*</option>
          <option value="First">First</option>
          <option value="Second">Second</option>
          <option value="Third">Third</option>
        </select>

        <select class="formEntry extend"  id="select1">
          <option value="">Tap to select branch*</option>
          <option value="Computer">Computer science</option>
          <option value="Mechanical">Mechanical</option>
          <option value="Electronics">Electronics</option>
          <option value="Electrical">Electrical</option>
          <option value="Instrumentation">Instrumentation</option>
          <option value="Chemical">Chemical</option>
          <option value="Civil">Civil</option>
          <option value="Food">Food</option>
        </select>

    

        <button
          id="upbtn"
          class="formEntry extend"
          onclick="document.getElementById('getFile').click()"
        >
          Tap to upload Photo*
        </button>
        <input type="file" id="getFile" style="display: none" />

        <button
          id="resbtn"
          class="formEntry extend"
          onclick="document.getElementById('getRes').click()"
        >
          Tap to upload Resume(optional)
        </button>
        <input type="file" id="getRes" style="display: none" />


        <input type="checkbox" class="cb" id="checkit" />
        <label class="cb">
          I hereby declare that all the information provided above is correct to
          the best of my knowledge.</label
        ><br /><br />

        <input type="submit" id="submitbtn" class="submit" />
      </div>
    </div>
    <div class="pop_msg" id="pop" style="display: none;">
      <h3 id="msg">message</h3>
      <button id="bty" onclick="close()"> okay </button>
  </div>
    
  </body>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    import {
      getStorage,
      ref,
      uploadBytes,
      getDownloadURL,
    } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-storage.js";
    import {
      getDatabase,
      set,
      ref as dbRef,
    } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAV2w0BDk0MZW1wdBAx23csse_zeyKn7eo",
      authDomain: "endeavournew-26bda.firebaseapp.com",
      projectId: "endeavournew-26bda",
      storageBucket: "endeavournew-26bda.appspot.com",
      messagingSenderId: "898809570236",
      appId: "1:898809570236:web:9642afa56d6ec6e91741b9",
      measurementId: "G-56CPJNZ7Y6",
    };
    var date2 = new Date("09/01/2023");
    var date1 = new Date();
    var Difference = date2.getTime() - date1.getTime();
    var dayscp = ((Difference / (1000 * 3600 * 24)));
    var cp5= Math.floor(dayscp);
    var hourcp=Math.floor(((dayscp%cp5))*24);
    var hourcp1=(((dayscp%cp5))*24);
    var mincp2=Math.floor((hourcp1%hourcp)*60)
    // var mincp= 
    // alert(hourcp2);

     let cp2=document.getElementById("cptime");
    cp2.innerHTML=`The Registration will end within ${cp5} days ${hourcp} hour  and ${mincp2}mins ;`
    let uid;
    let photo;
    let resume;
    let done=false;
    const fileInput1 = document.getElementById("getRes");
    fileInput1.onchange = () => {

      const selectedFile = fileInput1.files[0];
      resume = selectedFile;
      document.getElementById("resbtn").innerHTML = "File : " + resume.name;
      // alert("resume is working")
    };
    const fileInput = document.getElementById("getFile");
    fileInput.onchange = () => {
      const selectedFile = fileInput.files[0];
      photo = selectedFile;
      document.getElementById("upbtn").innerHTML = "photo : " + photo.name;
    };
    function disp(x){
      document.getElementById("pop").style.display="block";
      document.getElementById("msg").innerHTML= x;
    }
    function close(){
      if(!done)
      {
        document.getElementById("pop").style.display=none;

      }
      else
      {
        window.location.href="./about.html";
      }
    }
    bty.addEventListener('click', (e) => {
            if (!done)
                document.getElementById("pop").style.display = "none";
            else
                window.location.href = "./about.html";
        });

    initializeApp(firebaseConfig);
    const root = getDatabase();
    const storage = getStorage();
 
    

    function upload() {
    const storageRef = ref(storage, uid + "photo");
    uploadBytes(storageRef, photo).then((snapshot) => {
    disp("uploaded photo");
    getDownloadURL(storageRef)

    .then((url) => {
                        if(resume)
                            upload1(url);
                        else
                            getready(url,"");
                        // `url` is the download URL for 'images/stars.jpg'
                    })
                    .catch((error) => {
                        // Handle any errors
                    });
    });
    }
    function upload1(x) {
      const storageRef = ref(storage, uid + "resume");
      uploadBytes(storageRef, resume).then((snapshot) => {
        disp("Uploaded resume!");

        getDownloadURL(storageRef)
                    .then((url) => {
                        getready(x, url);
                        // `url` is the download URL for 'images/stars.jpg'
                    })
                    .catch((error) => {
                        // Handle any errors
                    });
            });
    }
    function getready(pht,res) {
            var username = document.getElementById('name').value;
            var mail = document.getElementById('email').value;
            var _contact = document.getElementById('contact').value;
            var _reg = document.getElementById('regno').value;
            var _ten = document.getElementById('ten').value;
            var _twelve = document.getElementById('twelve').value;
            var _why = document.getElementById('why').value;
            var _prog = document.querySelector('#prog').value;
            var _year = document.querySelector('#year').value;
            var _trade = document.querySelector('#select1').value;

            writeUserData(username,mail,_contact,_reg,_ten,_twelve,_why,_prog, _year,_trade,pht,res)
            
        }
 

    function writeUserData(_name,mail,_contact,_reg,_ten,_twelve,_why,_prog, _year,_trade
    ) {
      set(dbRef(root, "registrations/" + uid), {
        name: _name,
        email: mail,
        contactno: _contact,
        reg: _reg,
        ten: _ten,
        twelve: _twelve,
        why: _why,
        prog: _prog,
        year: _year,
        trade: _trade,
      })
        .then(() => {
          // Data saved successfully!
          console.log("done");
          done = true;
         disp("DONE !  YOUR FORM HAS BEEN SUBMITTED");

        //  window.location.href = "./index.html";
        })
        .catch((error) => {
          console.log(error);
          alert("error ");
        });
    }
    
    submitbtn.addEventListener("click", (e) => {
      e.preventDefault();
      var username = document.getElementById("name").value;
      var mail = document.getElementById("email").value;
      var _contact = document.getElementById("contact").value;
      var _reg = document.getElementById("regno").value;
      var _ten = document.getElementById("ten").value;
      var _twelve = document.getElementById("twelve").value;
      var _why = document.getElementById("why").value;
      var _prog = document.querySelector("#prog").value;
      var _year = document.querySelector("#year").value;
      var _trade = document.querySelector("#select1").value;
      let el = document.getElementById("checkit");
      uid = _reg;
    
      if(username && mail && _contact && _reg && _prog && _year && _trade && _ten && _why)
          if(photo){
                  if(el.checked){
                    disp("Please wait... uploading... ")
                    upload();
                      }
                      else{
                          disp("Please check the tick box");
                      }
                  }
          else{
            disp("please upload photo")
          }
        else{
        disp("Please fill the details")
           }
    });
  </script>
</html>
